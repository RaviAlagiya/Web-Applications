<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Reaching UTA</title>
    <style>
    
         #map 
         {
            border:  rgba(0, 1, 8, 0.37) 5px solid;
           width: 600px; height: 400px;
           
          }
        
          header h1 
          {
              text-align: center;

          }
          #instructions
          {
           width: 600px;
           
          }
          #content
          {
             width: 600px;
             margin: auto;
          }
          html, body {
            height: 100%;
            margin: 0;
            padding: 0;
          }
          
    </style>
  </head>
  <body>
      <header>
        <h1> Direction to University of Texas, Arlington</h1>
      </header>
  
      <hr>

      <div id="content">
          <div id="map"></div>
          <div id="instructions">Searching Route Directions . ... Please wait . .. </div>
      </div>
   
    <script>
      function initMap() {
      
          var directionsDisplay = new google.maps.DirectionsRenderer;
          var directionsService = new google.maps.DirectionsService;
    
          var map = new google.maps.Map(document.getElementById('map'), 
                                        {
                                           zoom: 4,
                                           // Below is the lat and Lng of UTA
                                            //,
                                         center: {lat: 32.730891, lng: -97.1168045}
                                        });

           directionsDisplay.setMap(map);

       
        calculateAndDisplayRoute(directionsService, directionsDisplay);
        
      }

      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
      var currentLatLng;

        // To find directions without using Car 
        var travelMode = "TRANSIT";
         
         //To get user's Current Location
        if (navigator.geolocation) 
        {

              navigator.geolocation.getCurrentPosition(function(position) 
              {

                 currentLatLng= new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                
                     directionsService.route({
                                                origin: currentLatLng,
                                                   destination: "The University of Texas at Arlington",  
                                                    travelMode: google.maps.TravelMode[travelMode]
                                              },function(response, status) {
                                                if (status == 'OK') 
                                                {
                                                    directionsDisplay.setDirections(response);
                                                   prepareInstructions(response);
                                           
                                                } else {
                                                  window.alert('Directions request failed due to ' + status);

                                                }
                                                });
                          }, handleLocationError);
        } else {
          
                handleLocationError(); 
              }


      }

      function prepareInstructions(response)
      {
        var myRoute = response.routes[0].legs[0];
             var directions="Follow the below instructions to reach <strong> University of Texas at Arlington</strong> <br>";
              for (var i = 0; i < myRoute.steps.length ; i++) 
              {
                 
                  directions=directions+  "<br>"+ (i+1)+ " ) "+ myRoute.steps[i].instructions;

                        //Direction for the path which will not be covered by transportation
                  if (myRoute.steps[i].travel_mode != "TRANSIT" && myRoute.steps[i].steps.length > 0) 
                  {
                     var subStep = myRoute.steps[i].steps;
                     var subDirections="";
                    
                      for(var j = 0; j < subStep.length ; j++)
                      {
                          if(subStep[j].instructions)
                            subDirections=subDirections+  "  > " + subStep[j].instructions;
                          }

                          if(subDirections != "")
                           directions=directions+ "( " + subDirections+ " ) " ;
                   }          
               }
            
             document.getElementById("instructions").innerHTML='<p>' + directions + '</p>';
      }
      

       function handleLocationError() {
      
        alert("Error : Your browser doesn't support geolocation.");
          document.getElementById("instructions").innerHTML='<p>' + "Please enable geolocation" + '</p>';
      
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=<Your_API_KEY>&callback=initMap">

    </script>
    
  </body>
</html>
